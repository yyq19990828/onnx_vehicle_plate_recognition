# 有效使用 `debug` 子工具


## 目录

- [简介](#introduction)
- [提示和技巧](#tips-and-tricks)
    - [使用交互模式入门](#using-interactive-mode-to-get-started)
    - [什么算作“失败”？](#what-counts-as-a-failure)


## 简介

`debug` 子工具的工作原理相同：

1. 迭代地执行一些任务，生成一些输出
2. 评估生成的输出，以确定应将其视为“良好”还是“不良”
3. 根据 (2) 将任何跟踪的工件分类到 `good` 和 `bad` 目录中
4. 如果需要，进行更改，然后重复该过程

本指南提供了一些通用信息以及有关如何有效使用 `debug` 子工具的提示和技巧。


## 提示和技巧

### 使用交互模式入门

`debug` 子工具中的自动模式（即提供 `--check` 命令时）提供了一种完全无需干预的方法。但是，如果您刚刚开始，它也可能更难使用和理解。
Polygraphy 中的 `debug` 工具还提供了一种交互模式，它将提示并指导您完成整个过程。

要使用交互模式，您只需省略 `--check` 选项即可。
例如，使用 `debug reduce`：
```bash
polygraphy debug reduce <model.onnx> -o <reduced.onnx>
```


### 什么算作“失败”？

在自动模式下（即提供 `--check` 命令时），`debug` 子工具将假定非零退出状态表示失败。在某些情况下，这种假设可能并不可取：

- 您可能希望忽略某些类型的故障，以便获得以非常特定的方式失败的最小模型。

- 您的 `--check` 命令可能根本不会以非零状态退出！
    相反，您可能希望根据此类命令的输出而不是其退出状态来触发故障。

对于这些情况，您可以使用 `--fail-regex` 选项，该选项仅在 `--check` 命令的输出（在 `stdout` 或 `stderr` 上）的某些部分与指定的正则表达式之一匹配时才会触发故障。
